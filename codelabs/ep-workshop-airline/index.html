
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Solace PubSub&#43; Event Portal Training for Airlines</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
   
  <google-codelab codelab-gaid=""
                  id="ep-workshop-airline"
                  title="Solace PubSub&#43; Event Portal Training for Airlines"
                  environment="web"
                  feedback-link="https://github.com/SolaceDev/solace-dev-codelabs/blob/master/markdown/ep2-workshop-versioning-airline">
    
      <google-codelab-step label="What you&#39;ll learn: Overview" duration="3">
        <p>During this code lab you&#39;ll put your PubSub+ knowledge into action, seeing a day in the life of a developer, and later on a deployment manager.</p>


      </google-codelab-step>
    
      <google-codelab-step label="What to do before the start of the workshop" duration="5">
        <h2 is-upgraded>Find your invite email</h2>
<p>Prior to the start of the workshop you should have received an email with an invitation to join special Event Portal account used for this workshop.  Note that this is different than the main account used by your company.</p>
<p class="image-container"><img src="img/465b4d864605536f.png"></p>
<h2 is-upgraded>Get all signed up</h2>
<p>When you click on Accept Invite, you&#39;ll be taken to a page to provide information and create a password.  Once you&#39;ve done that, click on Sign Up.</p>
<p class="image-container"><img alt="Figure-1" src="img/edb4b795b70d71ba.png"></p>
<h2 is-upgraded>Make sure you&#39;ve got the latest features</h2>
<p>Once you enter Event Portal, the turn on Event Portal 2.0 features using the toggle switch.</p>
<p class="image-container"><img alt="Figure-1" src="img/4d71a263077c99bf.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Understand your current application" duration="0">
        <h2 is-upgraded>Launch the catalog</h2>
<p>Since you want to change the existing checkInEngine application,  use the catalog to find it, and examine what it looks like right now.</p>
<p class="image-container"><img alt="Figure-1" src="img/9f9a634367e0ec0f.png"></p>
<h2 is-upgraded>Find your existing application</h2>
<ol type="1">
<li>Make sure you are on the Applications tab</li>
<li>In the search box, type check</li>
<li>In the results, you can see all applications related to checkin</li>
<li>For the checkInEngine result, click on the three dots button on the right hand side</li>
<li>Click on Open in Designer <img alt="Figure-1" src="img/aed3c1c1d2dac2e3.png"></li>
</ol>
<h2 is-upgraded>Better understand how the application works today</h2>
<p>Here you see all of the information related to the checkInEngine.  Note that:</p>
<ol type="1">
<li>There are multiple different versions of the application, including some that are retired and are no longer used.</li>
<li>The most recent version is in the released state, which means that it cannot be modified.</li>
<li>The application currently subscribes to two events: bookingDetails and cancelledBooking</li>
<li>Now that you&#39;re familiar with the basic structure of the current application, click on return to catalog.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/9be2ba045bef0d45.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Find hidden assets in your enterprise" duration="0">
        <h2 is-upgraded>Dig for buried event treasure</h2>
<p>Now you will find an interesting, existing event and add it to checkInEngine, to make it even more useful.  It would be helpful to have the lastest boarding status for flights, so try to find an event related to boarding.</p>
<ol type="1">
<li>Click on the Events tab at the top of the screen and type in boarding to the search box</li>
<li>Find the boardingStatus event that belongs to your domain and click on the ... button</li>
<li>Click on Open in Designer</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/6c9a4d9511ea3c1c.png"></p>
<h2 is-upgraded>Better understand the event you found</h2>
<p>Similar to the application page, the event page shows relevant information for the boardingStatus event.</p>
<ol type="1">
<li>There is a single released version, along with additional retired events.</li>
<li>It&#39;s a shared event, so applications outside the CheckIn domain can use it.</li>
<li>No applications are subscribing to the event right now (which is a huge missed opportunity), and its being published by the boardingEngine application.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/6e3d0241b48fde84.png"></p>
<p>So you know you&#39;ve found hidden event gold.  Now it&#39;s time to update your existing application to use it!</p>


      </google-codelab-step>
    
      <google-codelab-step label="Exploiting your buried event" duration="0">
        <p>Now you know a great event to add functionality to the checkIn application.  Navigate back to the checkin application definition and get started.</p>
<h2 is-upgraded>Create a new draft application version</h2>
<p>As mentioned earlier, once an application is put into released status, it can no longer be updated.  To create a new version</p>
<ol type="1">
<li>Click on the three dots next to the latest released version</li>
<li>Click on duplicate</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/6889b2cebe29c218.png"></p>
<p>Now you have a new version of the checkInEngine application in Draft status, which can be edited.</p>
<h2 is-upgraded>Add an event to your application</h2>
<p>Since you want to add an existing event, click on Manage Events, which lets you modified subscribed and published events.</p>
<p class="image-container"><img alt="Figure-1" src="img/5bd8d8ca67bbeeca.png"></p>
<p>You will see a list of events in the checkin domain.  (If you wanted to use a shared event outside the active domain you could use the Application Domain drop down at the top of the popup).  To subscribe to the boardingStatus event:</p>
<ol type="1">
<li>Click on the boardingStatus row to expand it</li>
<li>Find the latest version that is in released state, and click on Sub (for subscribe)</li>
<li>Click on the X at the top of the popup to close it.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/e911567241ef9c1f.png"></p>
<p>Make sure your changes are saved by clicking on Save Version</p>
<p class="image-container"><img alt="Figure-1" src="img/f6b0a1bb28d3eec1.png"></p>
<h2 is-upgraded>Add a consumer for the new event</h2>
<p>Now the application is expecting the boardingStatus event, but you also need to specify where on the event broker to get the event.  A consumer lets you do that.</p>
<ol type="1">
<li>Switch from the Events tab to the Consumers tab.  You should see existing consumers for the existing events.</li>
<li>Click on Add Consumer.</li>
<li>Name the queue <code>checkinEngine.boardingStatus</code></li>
<li>Select <code>Solace Direct Client</code> from the Type pull down</li>
<li>Click on Add Subscriptions</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/b3675ddf6b329964.png"></p>
<h2 is-upgraded>Add a subscription to your consumer</h2>
<p>In the next screen, Event Portal suggests events you might want to consume.  Click on the Select button next to <code>boardingStatus</code></p>
<p class="image-container"><img alt="Figure-1" src="img/eae1fb1be2079832.png"></p>
<ol type="1">
<li>After selecting the event, Event Portal then tells you what events it will attract for a particular environment.  Here we are seeing events in Development</li>
<li>The application will attract only the boardingStatus event using that subscription, which is probably what you want (unintentionally receiving events due to an overly broad subscription is a major problem in EDA).</li>
<li>You can see the suggested subscription in the topic address box</li>
<li>Click on Add Subscription to confirm your choice.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/50554efe0ecd709a.png"></p>
<h2 is-upgraded>Make sure everyone knows a new version is coming</h2>
<p>Since you want to release the updated spec to your dev team, change the state of the version by first clicking on Change State</p>
<p class="image-container"><img alt="Figure-1" src="img/f8dd837542b04a4c.png"></p>
<ol type="1">
<li>Make sure the &#34;New State&#34; is Released</li>
<li>Then click on Change State.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/6e0bd060d95dbca3.png"></p>
<h2 is-upgraded>Make sure everyone knows the old version is leaving</h2>
<p>While you&#39;re at it, deprecate the old version so people know it&#39;s going away soon.</p>
<ol type="1">
<li>Click on the older version of the application</li>
<li>Click on Change state.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/323fb6297c3cb767.png"></p>
<ol type="1">
<li>Make sure the New State is Deprecated</li>
<li>Click on Change State</li>
</ol>
<p>Now you&#39;ve got a new application definition that is much more functional.  But what can you do with it?  In the next section, you will put your new application version into action.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Make your application real" duration="0">
        <p>So you&#39;ve got the structure of the new checkInEngine application. Now it&#39;s time to take it from design to implementation.  The key is AsyncAPI, which gives you access to a wide variety of tooling–including code generation.</p>
<h2 is-upgraded>Download the AsyncAPI</h2>
<p>Picking up where you left off in the last section:</p>
<ol type="1">
<li>Find the lastest version of checkInEngine</li>
<li>Click on the ...</li>
<li>Click on Download AsyncAPI</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/a160d1e114431040.png"></p>
<p>In the resulting Download AsyncAPI window,</p>
<ol type="1">
<li>Select the radio button to download the AsyncAPI in yaml</li>
<li>Click on Download File</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/879f87ef04e28dac.png"></p>
<p>Save the AsyncAPI file on your desktop and open it in the text editor of your choice.</p>
<h2 is-upgraded>Get the spec into AsyncAPI Studio</h2>
<p>There is wide support for AsyncAPI in many different tools, but the easiest way to get started is with <a href="http://studio.asyncapi.com" target="_blank">AsyncAPI Studio</a></p>
<ol type="1">
<li>Navigate to <a href="http://studio.asyncapi.com" target="_blank">AsyncAPI Studio</a></li>
<li>Cut and paste the contents of the downloaded AsyncAPI into the editor window</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/c01fa42e298bfc1a.png"></p>
<h2 is-upgraded>Examine the AsyncAPI</h2>
<p>Now would be a good time to check out structure of an AsyncAPI document.  You&#39;ll see that:</p>
<ol type="1">
<li>It&#39;s very similar to an OpenAPI document</li>
<li>Most of the information stored within Event Portal is reflected in the exported file.</li>
</ol>
<h2 is-upgraded>Generate code from the AsyncAPI</h2>
<p>To actually generate the code,</p>
<ol type="1">
<li>Click on the ... at the top of the screen</li>
<li>Click on Generate code/docs</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/fecf8497c683d48f.png"></p>
<p>On the next popup,</p>
<ol type="1">
<li>Select Java Spring Cloud Stream Project from the Generate dropdown</li>
<li>Click on Generate</li>
<li>Save the generated .zip file to your desktop</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/fa4a64b7228d4c82.png"></p>
<h2 is-upgraded>Celebrate your freshly generated code</h2>
<p>The code generated by the AsyncAPI tooling has a deep folder structure, with the source AsyncAPI at the top level.  To see the generated code:</p>
<ol type="1">
<li>Navigate to <code>/template/src/main/java</code></li>
<li>Open <code>Application.java</code>    This contains the application logic, which would be filled in by developers with your specific business logic.</li>
<li>Open the remaining files in the directory.  These are the Plain Old Java Objects (POJOs), which represent the events that will flow in and out of your application.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/36f5dc1856962bce.png"></p>
<p>Example of generated POJOs.</p>
<p class="image-container"><img alt="Figure-1" src="img/7d67169eb9555207.png"></p>
<p>So now you have defined an interface, specified where on the broker you will send and receive events, and generated code that implements it all.  But how do you keep everything in order while moving environments?  That&#39;s coming soon, but first some behind the scenes work.</p>


      </google-codelab-step>
    
      <google-codelab-step label="A quick change in hats" duration="0">
        <p>To this point you&#39;ve played the role of a developer.  And your access in Event Portal has reflected that. You&#39;ve only been able to see domains that you have authorization to, not those of other students.  In the same way, developers in a real-organization wouldn&#39;t be able to see or at least change events and applications owned by another group.</p>
<p>In this section, you&#39;ll support the infrastructure.  But to do that, you will need a different role in Event Portal.</p>
<ul>
<li>If you&#39;re doing this class independently, you can do this on your own.</li>
<li>If you&#39;re doing this class as part of a group instruction, your instructor will do these steps.</li>
</ul>
<h2 is-upgraded>See what users can do and change it</h2>
<p>If you&#39;re an admin, you can see all users for an account by</p>
<ol type="1">
<li>Clicking on the person icon at the very bottom left of the screen</li>
<li>Clicking Account Details</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/a3e4a56d7da1c27a.png"></p>
<p>On the resulting admin screen,</p>
<ol type="1">
<li>Click on User Management</li>
<li>Click the ... next to the user you want to modify</li>
<li>Click on Edit</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/986d1a96f0c8a770.png"></p>
<p>You will see a variety of different roles for the user.  For this scenario though, make them a Event Portal manager.</p>
<p class="image-container"><img alt="Figure-1" src="img/73f3708b2e80e23d.png"></p>
<p>Now you are all set for the next section, where you will play the part of a deployment manager.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Fix deployment issues quickly" duration="0">
        <p>With your new job role of deployment manager in place, there is of course an immediate crisis.  Luckily you have the tools to quickly analyze what&#39;s going on.</p>
<h2 is-upgraded>New tools, new buttons, new access</h2>
<p>The first thing you&#39;ll notice is that as a deployment manager you have a new tool availabe to you: the Runtime Event Manager. You can get to it two ways:</p>
<ol type="1">
<li>The Home Screen</li>
<li>The Sidebar</li>
</ol>
<p>Open the Runtime Event Manager using the sidebar</p>
<h2 is-upgraded>Explore the Runtime Event Manager</h2>
<p class="image-container"><img alt="Figure-1" src="img/6eaae87295d38e92.png"></p>
<p>Once you open the runtime event manager, you&#39;ll see</p>
<ol type="1">
<li>All modelled event meshes for your organization.  A modelled event mesh shows what applications and events are currently available for one group of connected brokers (e.g. a Solace Event Mesh or a Kafka cluster)</li>
<li>Each modelled event mesh lives within an environment like production, integration or development.  Just like in real life, MEMs in different environments can look radically different.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/bd661c1e11657f13.png"></p>
<p>Your new access also lets you see additional resources within Event Portal, including others students&#39; domains.  So for the rest of the lab, please be careful not to touch other peoples&#39; stuff.</p>
<p class="image-container"><img alt="Figure-1" src="img/a017ca2ec2ce3549.png"></p>
<h2 is-upgraded>A crisis arrives</h2>
<p>A co-worker runs into the room, panicked because boardingStatus events are piling up on the event broker in Integration.  And there is a big presentation in 5 minutes.</p>
<h2 is-upgraded>Analyzing issues quickly</h2>
<p>Not wasting any time, you open up your integration modelled event mesh.</p>
<p class="image-container"><img alt="Figure-1" src="img/7795c35aad25ee76.png"></p>
<p>One thing is immediately obvious: the boarding status event isn&#39;t being consumed as expected in the Integration environment. But why?</p>
<p class="image-container"><img alt="Figure-1" src="img/8b924e5fbd00059c.png"></p>
<p>Then you spot it: the wrong version of checkInEngine is deployed!</p>
<ol type="1">
<li>You can see the events that checkInEngine subscribes to</li>
<li>You can see the events that checkInEngine publishes</li>
<li>You can see boardingStatus completely unattached</li>
<li>And...you can see an old, deprecated version of checkInEngine connected to that mesh.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/b01ce7fa7103ddbe.png"></p>
<p>You get on the phone immediately to the deployment team, and they promote the new version of checkInEngine to integration.  Crisis resolved!</p>
<h2 is-upgraded>Navigate from MEM to the application version</h2>
<p>In the meantime you get started on updating the modelled event mesh to match the new deployment.</p>
<ol type="1">
<li>Click on the version of checkInEngine on the modelled event mesh graph</li>
<li>The application version is highlighted in the list on the left. You can see that it&#39;s deprecated, but that doesn&#39;t mean that it&#39;s been removed from all environments yet.  Click on checkInEngine.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/807f38a3636bed43.png"></p>
<ol type="1">
<li>Then click on Open in Designer, which takes you right to the application version.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/e7be9c22b527c881.png"></p>
<h2 is-upgraded>Change environments assignments to match reality</h2>
<p>Under Environments for the version</p>
<ol type="1">
<li>Expand the airline Integration environment</li>
<li>Remove the two environment associations listed</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/ccea1d85d9c24586.png"></p>
<p>Now switch to the version of the application that you created and add it to Integration by</p>
<ol type="1">
<li>Clicking on the version in the left hand column</li>
<li>Clicking on the ... in the upper right corner</li>
<li>Selecting Add to Environment</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/e308c74aac72da9e.png"></p>
<p>Now you can assign the application to a particular environment, modelled event mesh and a messaging service, which is one event broker within an event mesh.</p>
<ol type="1">
<li>Select airline integration from the Environment pull down</li>
<li>Select your modelled event mesh</li>
<li>Select your messaging service (there should only be one available).</li>
<li>Click on Add.</li>
</ol>
<p class="image-container"><img alt="Figure-1" src="img/13529d00ef2f6e13.png"></p>
<h2 is-upgraded>See the fruits of your labor</h2>
<p>Navigate back to your integration modelled event mesh.  You should now see a beatifully connected graph, with boardingStatus flowing into checkInEngine.</p>
<p class="image-container"><img alt="Figure-1" src="img/27fee8f402def0fd.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="What&#39;s next?" duration="7">
        <p>So, you&#39;ve saved the day with Event Portal.  But having to manually update the modelled event mesh to reflect reality probably isn&#39;t the best process.   A better way would be to have Event Portal updates be part of your CICD pipeline.  If you&#39;re in a classroom setting, you&#39;re in luck, because that&#39;s the next topic.  If you are working independently, check out this <a href="https://solace.com/blog/software-development-lifecycle-with-event-portal/" target="_blank">summary blog on Solace.com</a></p>
<p class="image-container"><img alt="Soly Image Caption" src="img/44f356558033e250.gif"></p>
<p>Thanks for participating in this codelab! Let us know what you thought in the <a href="https://solace.community/" target="_blank">Solace Community Forum</a>! If you found any issues along the way we&#39;d appreciate it if you&#39;d raise them by clicking the Report a mistake button at the bottom left of this codelab.</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
